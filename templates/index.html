{% extends 'layouts/index.html' %}
{% block content %}
<div class="row">
    <div class="col-md-6">
        <h4>Search for blood</h4>
        <form action="{% url 'index' %}" method="post" class="row">
            {% csrf_token %}
            <div class="form-group mb-2 col-md-6">
                <label for="blood_group">Blood Group</label>
                <select name="blood_group" id="blood_group" class="form-control" required>
                    <option value="">Select</option>
                    <option value="A+">A+</option>
                    <option value="A-">A-</option>
                    <option value="B+">B+</option>
                    <option value="B-">B-</option>
                    <option value="AB+">AB+</option>
                    <option value="AB-">AB-</option>
                    <option value="O+">O+</option>
                    <option value="O-">O-</option>
                </select>
                <input type="hidden" name="latitude" id="latitude" required>
                <input type="hidden" name="longitude" id="longitude" required>
            </div>
            <div class="form-group mb-2 col-md-6">
                <label for="filter_by">Filter</label>
                <select name="filter_by" id="filter_by" class="form-control" required>
                    <option value="">Select</option>
                    <option value="Rating">Rating</option>
                    <option value="Nearest Location">Nearest Location</option>
                </select>
            </div>
            <div class="form-group mb-2 col-md-12">
                <button type="submit" class="btn btn-danger"><i class="ri-search-2-line"></i> Search</button>
            </div>
        </form>

        <p class="mt-3">
            Lorem ipsum dolor sit amet consectetur adipisicing elit. Obcaecati consequatur consequuntur, enim deserunt aliquid eius repellat beatae blanditiis omnis quibusdam, temporibus nostrum harum dolore, ad voluptatibus. Laboriosam at ad asperiores!
        </p>
        <p>
            Lorem ipsum dolor sit amet consectetur adipisicing elit. Asperiores, quod reiciendis! Blanditiis nesciunt, libero expedita tenetur ex porro, sit voluptatibus maiores officia, repellat assumenda non vel quam. Magni, est hic.
        </p>
        <p>
            <a href="#">Know more</a>
        </p>
    </div>

    <div class="col-md-6">
        <img src="https://source.unsplash.com/IfhHgroyKsc" alt="" class="w-100">
    </div>
</div>


<!-- Chart -->
<div class="row mt-5">
    <div class="col-md-4">
        <div class="row">
            <div class="col-md-12 text-center mb-3">
                <div class="card">
                    <div class="card-body py-5">
                        <h2><i class="ri-user-3-line"></i></h2>
                        <h4>{{ donors }} Donors in total</h4>
                    </div>
                </div>
            </div>

            <div class="col-md-12 text-center mb-3">
                <div class="card">
                    <div class="card-body py-5">
                        <h2><i class="ri-hospital-line"></i></h2>
                        <h4>{{ banks }} banks in total</h4>
                    </div>
                </div>
            </div>

            <div class="col-md-12 text-center mb-3">
                <div class="card">
                    <div class="card-body py-5">
                        <h2><i class="ri-user-smile-line"></i></h2>
                        <h4>{{ users }} receivers in total</h4>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class="col-md-8">
        <div class="row">
            {% include 'chart.html' %}
        </div>
    </div>
</div>
{% endblock %}

{% block js %}
<script>
    $(document).ready(function () {
        if (navigator.geolocation) {
            navigator.geolocation.getCurrentPosition(showPosition);
        } else {
            x.innerHTML = "Geolocation is not supported by this browser.";
        }

        function showPosition(position) {
            $('#latitude').val(position.coords.latitude);
            $('#longitude').val(position.coords.longitude);
            console.log("Latitude: " + position.coords.latitude + "<br>Longitude: " + position.coords.longitude);
        }
    });
</script>
{% endblock %}